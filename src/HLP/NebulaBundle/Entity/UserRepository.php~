<?php

namespace HLP\NebulaBundle\Entity;

use Doctrine\ORM\EntityRepository;

/**
 * UserRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class UserRepository extends EntityRepository
{
  public function findSingleUser($usernameCanonical)
  {
  
    $qb = $this->_em->createQueryBuilder();
    $qb->select('i')
       ->from('HLPNebulaBundle:User', 'i')
       ->where('i.usernameCanonical = :usernameCanonical')
       ->leftJoin('i.mods', 'm')
       ->addSelect('m')
       ->setParameter('usernameCanonical', $usernameCanonical);
       

    return $qb->getQuery()
              ->getOneOrNullResult();
  }
}
